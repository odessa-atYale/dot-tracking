<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dot Tracking Task</title>
    <style>
        #dot-container {
            width: 100%;
            height: 500px;
            position: relative;
            background-color: #f0f0f0;
        }
        .dot {
            width: 20px;
            height: 20px;
            background-color: red;
            border-radius: 50%;
            position: absolute;
        }
    </style>
</head>
<body>
    <div id="dot-container"></div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let dotContainer = document.getElementById('dot-container');
            let dots = [];
            let startTime, endTime;
            let data = [];

            function createDot(x, y) {
                console.log(`Creating dot at (${x}, ${y})`);
                let dot = document.createElement('div');
                dot.classList.add('dot');
                dot.style.left = `${x}px`;
                dot.style.top = `${y}px`;
                dot.addEventListener('click', () => {
                    let timeClicked = Date.now();
                    data.push({x: x, y: y, time: timeClicked - startTime});
                    dot.remove();
                    if (dots.length > 0) {
                        createDot(dots.pop().x, dots.pop().y);
                    } else {
                        endTime = Date.now();
                        sendData();
                    }
                });
                dotContainer.appendChild(dot);
            }

            function startTask() {
                startTime = Date.now();
                let containerWidth = dotContainer.offsetWidth;
                let containerHeight = dotContainer.offsetHeight;
                for (let i = 0; i < 10; i++) {
                    dots.push({
                        x: Math.random() * (containerWidth - 20),
                        y: Math.random() * (containerHeight - 20)
                    });
                }
                let firstDot = dots.pop();
                createDot(firstDot.x, firstDot.y);
            }

            function sendData() {
                const xhr = new XMLHttpRequest();
                xhr.open("POST", "https://your-google-script-url", true);
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        alert("Task Completed! Data sent.");
                    }
                };
                xhr.send(JSON.stringify(data));
            }

            startTask();
        });
    </script>
</body>
</html>
